#!/usr/bin/env python3
"""Bump the version number in VERSION file.

Usage:
    ./bump fix      # 0.1.0 -> 0.1.1  (bug fix, internal change)
    ./bump feature  # 0.1.1 -> 0.2.0  (visible/user-facing change)
"""
import sys
from pathlib import Path

VERSION_FILE = Path(__file__).parent / "VERSION"

def main():
    if len(sys.argv) < 2 or sys.argv[1] not in ("fix", "feature"):
        print("Usage: ./bump fix|feature")
        sys.exit(1)

    kind = sys.argv[1]
    old = VERSION_FILE.read_text().strip()
    major, minor, patch = (int(x) for x in old.split("."))

    if kind == "fix":
        patch += 1
    else:
        minor += 1
        patch = 0

    new = f"{major}.{minor}.{patch}"
    VERSION_FILE.write_text(new + "\n")
    print(f"{old} -> {new}")

if __name__ == "__main__":
    main()
